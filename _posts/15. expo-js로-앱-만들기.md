---
title: "15. expo js로 NFC앱 만들기"
date: "2024-07-05"
author: "포리"
keywords: ["expo", "react native"]
---

```bash
npx create-expo-app <project name> --template blank
```

```bash
npx expo prebuild
```

```bash
npm install react-native-nfc-manager
```

ios/YourProjectName/Info.plist

```xml
<key>NSUserTrackingUsageDescription</key>
<string>We need your permission to use NFC</string>
<key>NFCReaderUsageDescription</key>
<string>We need your permission to use NFC</string>
```

android/app/src/main/AndroidManifest.xml

```xml
<uses-permission android:name="android.permission.NFC" />
<uses-feature android:name="android.hardware.nfc" android:required="true" />
```

MainActivity.java

```java
import android.os.Bundle;
import com.facebook.react.ReactActivity;
import com.facebook.react.ReactActivityDelegate;
import com.facebook.react.ReactRootView;
import com.facebook.react.defaults.DefaultNewArchitectureEntryPoint;
import com.facebook.react.defaults.DefaultReactActivityDelegate;

import com.facebook.react.ReactActivity;

import com.facebook.react.ReactActivityDelegate;
import com.facebook.react.ReactRootView;
import com.facebook.soloader.SoLoader;

import com.facebook.react.ReactActivityDelegate;
import com.facebook.react.ReactRootView;

public class MainActivity extends ReactActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        NfcManager.getInstance().init(this);
    }
}
```

App.js

```jsx
import React, { useState, useEffect } from "react";
import { SafeAreaView, Text, Button, Alert } from "react-native";
import NfcManager, { NfcTech } from "react-native-nfc-manager";

function App() {
  const [nfcSupported, setNfcSupported] = useState(null);
  const [nfcEnabled, setNfcEnabled] = useState(false);
  const [tagInfo, setTagInfo] = useState(null);

  useEffect(() => {
    // NFC 초기화
    NfcManager.start()
      .then(() => NfcManager.isSupported())
      .then((supported) => setNfcSupported(supported))
      .catch((err) => console.warn(err));

    // NFC 상태 체크
    NfcManager.setEventListener(NfcTech.Ndef, {
      enabledChanged: (enabled) => {
        setNfcEnabled(enabled);
      },
    });

    return () => {
      NfcManager.setEventListener(NfcTech.Ndef, null);
    };
  }, []);

  const readTag = async () => {
    try {
      await NfcManager.requestTechnology(NfcTech.Ndef);
      const tag = await NfcManager.getTag();
      setTagInfo(tag);
      console.log(tag);
      Alert.alert("Tag Found", JSON.stringify(tag));
    } catch (ex) {
      console.warn(ex);
    } finally {
      NfcManager.cancelTechnologyRequest();
    }
  };

  return (
    <SafeAreaView
      style={{ flex: 1, justifyContent: "center", alignItems: "center" }}
    >
      <Text>NFC Supported: {nfcSupported ? "Yes" : "No"}</Text>
      <Text>NFC Enabled: {nfcEnabled ? "Yes" : "No"}</Text>
      <Button title="Scan NFC Tag" onPress={readTag} disabled={!nfcEnabled} />
      {tagInfo && (
        <Text style={{ marginTop: 20 }}>{JSON.stringify(tagInfo)}</Text>
      )}
    </SafeAreaView>
  );
}

export default App;
```

```sh
npx react-native run-android
npx react-native run-ios
```
